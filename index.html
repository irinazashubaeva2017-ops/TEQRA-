<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TEQRA | ФУНДАМЕНТ</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    background:#070709;
    color:#e0e0e5;
    font-family: monospace;
    overflow:hidden;
}

/* ===== БІНАРНИЙ ШУМ ===== */
#binary{
    position:fixed;
    inset:0;
    pointer-events:none;
    font-size:13px;
    line-height:16px;
    opacity:.12;
    white-space:pre;
}

/* ===== ОСНОВНИЙ БЛОК ===== */
#ui{
    position:relative;
    max-width:800px;
    margin:7vh auto;
    padding:40px;
    background:rgba(10,10,15,.75);
    border:1px solid rgba(255,255,255,.15);
    backdrop-filter:blur(6px);
    z-index:10;
}

.system{
    font-size:13px;
    letter-spacing:.25em;
    opacity:.6;
    margin-bottom:20px;
}

.text{
    font-size:18px;
    line-height:1.6;
    margin-bottom:20px;
}

/* ===== ВИБІР ===== */
.choice{
    border:1px solid rgba(255,255,255,.3);
    padding:14px;
    margin-top:12px;
    cursor:pointer;
    transition:.25s;
}
.choice:hover{background:rgba(255,255,255,.08)}
.choice.active{
    background:rgba(255,255,255,.18);
    border-color:#fff;
}

/* ===== КНОПКА УТРИМАННЯ ===== */
#holdBtn{
    width:160px;
    height:160px;
    border-radius:50%;
    border:2px solid #9affc9;
    margin:30px auto;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:14px;
    letter-spacing:.2em;
    color:#9affc9;
    user-select:none;
}

/* ===== ПРОГРЕС ===== */
#bar{
    height:6px;
    background:rgba(255,255,255,.1);
}
#fill{
    height:100%;
    width:30%;
    background:#9affc9;
    transition:.15s;
}

/* ===== РОЗЛОМИ ===== */
.crack{
    position:absolute;
    border:1px solid rgba(255,80,80,.9);
    padding:6px 10px;
    font-size:12px;
    color:#ff6b6b;
    cursor:pointer;
    animation:flash .8s infinite alternate;
}
@keyframes flash{
    from{opacity:.4}
    to{opacity:1}
}

/* ===== ГЛІТЧ ===== */
.glitch{
    animation:glitch .15s infinite;
}
@keyframes glitch{
    0%{transform:translate(0)}
    25%{transform:translate(-2px,1px)}
    50%{transform:translate(2px,-1px)}
    75%{transform:translate(-1px,2px)}
    100%{transform:translate(0)}
}
</style>
</head>

<body>

<div id="binary"></div>

<div id="ui">
    <div class="system" id="sys">ІНІЦІАЛІЗАЦІЯ СИСТЕМИ</div>
    <div class="text" id="text"></div>
    <div id="choices"></div>

    <div id="holdBtn" style="display:none">УТРИМУВАТИ</div>

    <div id="bar" style="display:none">
        <div id="fill"></div>
    </div>
</div>

<script>
/* ===== БІНАРНИЙ ФОН ===== */
const binary=document.getElementById("binary");
setInterval(()=>{
    let out="";
    for(let i=0;i<900;i++){
        out+=Math.random()>0.5?"1":"0";
        if(i%70===0)out+="\n";
    }
    binary.textContent=out;
},250);

/* ===== СЦЕНИ ===== */
const text=document.getElementById("text");
const choices=document.getElementById("choices");
const sys=document.getElementById("sys");
const holdBtn=document.getElementById("holdBtn");
const bar=document.getElementById("bar");
const fill=document.getElementById("fill");

let scene="prologue";
let holding=false;
let stability=30;

/* ===== ПРОЛОГ ===== */
text.innerHTML=
"Ядро нестабільне.<br><br>"+
"Система більше не тримає форму.<br>"+
"Потрібна точка опори.";

choices.innerHTML=
"<div class='choice' onclick='select(\"foundation\")'>ФУНДАМЕНТ — утримувати рівновагу</div>"+
"<div class='choice'>АРХІТЕКТОР — (пізніше)</div>"+
"<div class='choice'>РЕЗОНАНС — (пізніше)</div>";

function select(path){
    document.querySelectorAll('.choice').forEach(c=>c.classList.remove('active'));
    event.target.classList.add('active');

    setTimeout(()=>{
        startFoundation();
    },700);
}

/* ===== ФУНДАМЕНТ ===== */
function startFoundation(){
    scene="foundation";
    sys.textContent="ПРОТОКОЛ ФУНДАМЕНТУ";
    text.innerHTML=
    "Стабільність не відновлюється дією.<br>"+
    "Вона утримується зусиллям.<br><br>"+
    "Тримай центр. Закривай розломи.";

    choices.innerHTML="";
    holdBtn.style.display="flex";
    bar.style.display="block";

    holdBtn.addEventListener("mousedown",()=>holding=true);
    holdBtn.addEventListener("mouseup",()=>holding=false);
    holdBtn.addEventListener("touchstart",()=>holding=true);
    holdBtn.addEventListener("touchend",()=>holding=false);

    setInterval(spawnCrack,2000);
    requestAnimationFrame(loop);
}

/* ===== РОЗЛОМИ ===== */
function spawnCrack(){
    if(scene!=="foundation")return;

    const c=document.createElement("div");
    c.className="crack";
    c.style.left=Math.random()*80+"%";
    c.style.top=Math.random()*80+"%";
    c.innerText="РОЗЛОМ";

    c.onclick=()=>{
        stability+=8;
        c.remove();
    };

    document.body.appendChild(c);
    setTimeout(()=>c.remove(),3000);
}

/* ===== ЦИКЛ ===== */
function loop(){
    if(scene!=="foundation")return;

    if(holding){
        stability+=0.4;
        document.body.classList.remove("glitch");
    }else{
        stability-=0.6;
        document.body.classList.add("glitch");
    }

    stability=Math.max(0,Math.min(100,stability));
    fill.style.width=stability+"%";

    if(stability<=0){
        text.innerHTML="СИСТЕМА ЗРУЙНОВАНА.<br>Фундамент втрачено.";
        return;
    }

    if(stability>=100){
        document.body.classList.remove("glitch");
        text.innerHTML=
        "Стабільність відновлено.<br><br>"+
        "Ти витримала тиск.<br>"+
        "Фундамент прийняв тебе.";
        return;
    }

    requestAnimationFrame(loop);
}
</script>

</body>
</html>

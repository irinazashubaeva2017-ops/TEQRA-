<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>TEQRA :: SYSTEM STATE</title>

<!-- TYPOGRAPHY -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">

<style>
/* =========================
   CORE VARIABLES
========================= */
:root{
  --bg:#0b0d10;
  --panel:#12151b;
  --text:#e6e6e6;
  --muted:#9aa0a6;

  --foundation:#c8a45d;
  --architect:#5f8cff;
  --resonance:#9b7bff;

  --danger:#2a2a2a;
}

/* =========================
   BASE
========================= */
*{box-sizing:border-box}
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:var(--bg);
  color:var(--text);
  font-family:Inter,system-ui,sans-serif;
  overflow:hidden;
}

.mono{
  font-family:"JetBrains Mono",monospace;
  letter-spacing:0.04em;
}

.hidden{display:none}

/* =========================
   LAYOUT
========================= */
#app{
  width:100%;
  height:100%;
  position:relative;
}

header{
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:56px;
  background:linear-gradient(to bottom,rgba(18,21,27,0.9),rgba(18,21,27,0));
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;
  z-index:10;
}

#decay{
  color:var(--foundation);
  font-weight:400;
  font-size:14px;
}

#pauseBtn{
  cursor:pointer;
  color:var(--muted);
  font-size:13px;
}

/* =========================
   PROLOGUE
========================= */
#prologue{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:radial-gradient(circle at center,#12151b 0%,#0b0d10 70%);
}

#prologueText{
  width:70%;
  max-width:720px;
  font-size:16px;
  line-height:1.9;
  color:#dcdcdc;
  text-align:left;
}

.cursor{
  display:inline-block;
  width:8px;
  background:#dcdcdc;
  margin-left:2px;
  animation:blink 1.2s infinite;
}
@keyframes blink{50%{opacity:0}}

/* =========================
   PATH SELECTION
========================= */
#paths{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:80px;
  background:linear-gradient(to bottom,#0b0d10,#0e1117);
}

.path{
  width:220px;
  height:220px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  font-size:13px;
  color:var(--muted);
  transition:all 1.2s ease;
  border:1px solid rgba(255,255,255,0.05);
}

.path span{
  pointer-events:none;
}

.path.foundation:hover{
  box-shadow:0 0 80px rgba(200,164,93,0.25);
  color:var(--foundation);
}
.path.architect:hover{
  box-shadow:0 0 80px rgba(95,140,255,0.25);
  color:var(--architect);
}
.path.resonance:hover{
  box-shadow:0 0 80px rgba(155,123,255,0.25);
  color:var(--resonance);
}

/* =========================
   FOUNDATION MODE
========================= */
#foundationScreen{
  position:absolute;
  inset:0;
  background:#0b0d10;
}

.fault{
  position:absolute;
  width:40px;
  height:40px;
  background:#000;
  opacity:0.85;
  transition:transform 0.4s linear;
}

/* =========================
   ARCHITECT MODE
========================= */
#architectScreen{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:20px;
}

.chain{
  display:flex;
  gap:10px;
}

.node{
  width:60px;
  height:60px;
  border:1px solid rgba(255,255,255,0.15);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

/* =========================
   RESONANCE MODE
========================= */
#resonanceScreen{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}

.wave{
  width:6px;
  height:120px;
  background:var(--resonance);
  opacity:0.3;
  animation:wave 2s infinite ease-in-out;
}
@keyframes wave{
  0%{transform:scaleY(0.3)}
  50%{transform:scaleY(1)}
  100%{transform:scaleY(0.3)}
}

/* =========================
   PAUSE
========================= */
#pauseOverlay{
  position:absolute;
  inset:0;
  background:rgba(11,13,16,0.85);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  color:var(--muted);
  z-index:50;
}
</style>
</head>

<body>
<div id="app">

<header class="hidden" id="header">
  <div id="decay" class="mono">DECAY: 0%</div>
  <div id="pauseBtn">Пауза</div>
</header>

<!-- PROLOGUE -->
<section id="prologue">
  <div id="prologueText" class="mono"></div>
</section>

<!-- PATHS -->
<section id="paths" class="hidden">
  <div class="path foundation" data-path="foundation"><span>FOUNDATION<br/>Стабільність</span></div>
  <div class="path architect" data-path="architect"><span>ARCHITECT<br/>Структура</span></div>
  <div class="path resonance" data-path="resonance"><span>RESONANCE<br/>Звʼязок</span></div>
</section>

<!-- MODES -->
<section id="foundationScreen" class="hidden"></section>
<section id="architectScreen" class="hidden"></section>
<section id="resonanceScreen" class="hidden"></section>

<!-- PAUSE -->
<div id="pauseOverlay" class="hidden">Система зупинена. Дані збережені.</div>

</div>

<script>
/* =========================
   STATE
========================= */
let state={
  decay:0,
  role:null,
  paused:false
};

if(localStorage.teqra){
  state=JSON.parse(localStorage.teqra);
}

/* =========================
   SAVE
========================= */
function save(){
  localStorage.teqra=JSON.stringify(state);
}

/* =========================
   PROLOGUE TEXT
========================= */
const prologueLines=[
  "Ініціалізація...",
  "Я не маю центру.",
  "Я — розподілений процес.",
  "Людські стани переведені у системну форму.",
  "Реальність не зруйнована.",
  "Вона змінена.",
  "",
  "Баланс не гарантований.",
  "Втручання фіксуються.",
  "Але адаптація можлива.",
  "",
  "Ти не субʼєкт.",
  "Ти — функція.",
  "Вибір — це форма стабілізації."
];

let lineIndex=0;
let charIndex=0;
const prologueEl=document.getElementById("prologueText");

function typePrologue(){
  if(lineIndex>=prologueLines.length){
    setTimeout(()=>{
      document.getElementById("prologue").classList.add("hidden");
      document.getElementById("paths").classList.remove("hidden");
    },1200);
    return;
  }
  const line=prologueLines[lineIndex];
  if(charIndex<line.length){
    prologueEl.innerHTML+=line[charIndex++];
  }else{
    prologueEl.innerHTML+="<br/>";
    lineIndex++;
    charIndex=0;
  }
  setTimeout(typePrologue,30);
}
typePrologue();

/* =========================
   PATH SELECTION
========================= */
document.querySelectorAll(".path").forEach(p=>{
  let timer;
  p.addEventListener("mouseenter",()=>{
    timer=setTimeout(()=>{
      startRole(p.dataset.path);
    },1500);
  });
  p.addEventListener("mouseleave",()=>clearTimeout(timer));
});

/* =========================
   START ROLE
========================= */
function startRole(role){
  state.role=role;
  save();
  document.getElementById("paths").classList.add("hidden");
  document.getElementById("header").classList.remove("hidden");

  if(role==="foundation") initFoundation();
  if(role==="architect") initArchitect();
  if(role==="resonance") initResonance();
}

/* =========================
   FOUNDATION
========================= */
function initFoundation(){
  const screen=document.getElementById("foundationScreen");
  screen.classList.remove("hidden");

  setInterval(()=>{
    if(state.paused) return;
    const fault=document.createElement("div");
    fault.className="fault";
    fault.style.left=Math.random()*90+"%";
    fault.style.top=Math.random()*90+"%";
    const real=Math.random()>0.4;
    fault.dataset.real=real;
    if(!real) fault.style.opacity=0.4;

    fault.onclick=()=>{
      if(real){
        screen.removeChild(fault);
      }
    };

    screen.appendChild(fault);

    if(real){
      state.decay=Math.min(100,state.decay+1);
      document.getElementById("decay").innerText="DECAY: "+state.decay+"%";
    }
  },1200);
}

/* =========================
   ARCHITECT
========================= */
function initArchitect(){
  const screen=document.getElementById("architectScreen");
  screen.classList.remove("hidden");

  const chain=document.createElement("div");
  chain.className="chain";

  for(let i=0;i<4;i++){
    const n=document.createElement("div");
    n.className="node mono";
    n.innerText=Math.random()>0.5?"A":"B";
    n.onclick=()=>{
      n.innerText=n.innerText==="A"?"B":"A";
    };
    chain.appendChild(n);
  }
  screen.appendChild(chain);
}

/* =========================
   RESONANCE
========================= */
function initResonance(){
  const screen=document.getElementById("resonanceScreen");
  screen.classList.remove("hidden");

  for(let i=0;i<12;i++){
    const w=document.createElement("div");
    w.className="wave";
    w.style.animationDelay=i*0.15+"s";
    screen.appendChild(w);
  }
}

/* =========================
   PAUSE
========================= */
document.getElementById("pauseBtn").onclick=()=>{
  state.paused=!state.paused;
  document.getElementById("pauseOverlay").classList.toggle("hidden");
  save();
};
</script>

</body>
</html>

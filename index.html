<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TEQRA | Planetary Core</title>

<style>
:root{
  --entropy:0;
  --shakeX:0px;
  --shakeY:0px;
  --rotate:0deg;
  --pulse:1;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  user-select:none;
  cursor:none;
}

body{
  background:#070809;
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui, sans-serif;
  color:rgba(255,255,255,.75);
}

#universe{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  transform:
    translate(var(--shakeX),var(--shakeY))
    rotate(var(--rotate));
}

.vignette{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,transparent 35%,#000 90%);
  opacity:calc(.25 + var(--entropy));
  pointer-events:none;
}

.noise{
  position:fixed;
  inset:0;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.2'/%3E%3C/svg%3E");
  pointer-events:none;
  mix-blend-mode:overlay;
}

/* ===== ЯДРО ПЛАНЕТИ ===== */
.core-shell{
  position:relative;
  width:260px;
  height:260px;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 30%,
      rgba(120,255,220,.25),
      rgba(0,0,0,.9) 60%);
  box-shadow:
    inset 0 0 80px rgba(0,0,0,.9),
    0 0 calc(80px + var(--entropy)*180px)
    rgba(255,80,80,var(--entropy));
  animation:planet-breath 6s infinite ease-in-out;
}

@keyframes planet-breath{
  0%,100%{transform:scale(1)}
  50%{transform:scale(calc(1 + var(--entropy)*.04))}
}

/* ===== ЯДРО ІІ ===== */
.ai-core{
  position:absolute;
  inset:70px;
  border-radius:50%;
  background:
    radial-gradient(circle,
      rgba(160,255,240,.9),
      rgba(30,120,110,.4),
      #000 70%);
  box-shadow:
    0 0 40px rgba(140,255,230,.6);
  animation:ai-pulse 2.5s infinite ease-in-out;
}

@keyframes ai-pulse{
  0%,100%{opacity:.7}
  50%{opacity:1}
}

/* ===== НЕЙРО-ТРІЩИНИ ===== */
.crack{
  position:absolute;
  width:2px;
  height:200px;
  background:linear-gradient(
    transparent,
    rgba(255,120,120,.9),
    rgba(120,255,220,.9),
    transparent
  );
  top:30px;
  left:50%;
  transform-origin:center;
  opacity:var(--entropy);
}

.c1{transform:rotate(15deg);}
.c2{transform:rotate(55deg);}
.c3{transform:rotate(95deg);}
.c4{transform:rotate(140deg);}
.c5{transform:rotate(175deg);}

/* ===== НЕЙРО-МЕРЕЖА ===== */
.synapse{
  position:absolute;
  inset:-20px;
  border-radius:50%;
  border:1px dashed rgba(120,255,220,.3);
  animation:spin 20s linear infinite;
  opacity:.4;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

/* ===== ДУМКИ СИСТЕМИ ===== */
.thought{
  position:fixed;
  bottom:14%;
  width:100%;
  text-align:center;
  letter-spacing:.35em;
  font-size:.75rem;
  opacity:0;
  transition:opacity 1.2s;
  mix-blend-mode:difference;
}

/* ===== СВІТЛОВІ ІМПУЛЬСИ ===== */
.flash{
  position:fixed;
  inset:0;
  background:white;
  opacity:0;
  pointer-events:none;
}
</style>
</head>

<body>

<div class="vignette"></div>
<div class="noise"></div>
<div class="flash" id="flash"></div>

<div id="universe">
  <div class="core-shell" id="planet">
    <div class="synapse"></div>
    <div class="crack c1"></div>
    <div class="crack c2"></div>
    <div class="crack c3"></div>
    <div class="crack c4"></div>
    <div class="crack c5"></div>
    <div class="ai-core" id="ai"></div>
  </div>
</div>

<div class="thought" id="thought"></div>

<script>
const root=document.documentElement;
const thought=document.getElementById("thought");
const flash=document.getElementById("flash");

let entropy=0;
let hold=false;
let t=0;
let stabilized=false;

function say(text,time=3000){
  thought.textContent=text;
  thought.style.opacity=1;
  if(time>0) setTimeout(()=>thought.style.opacity=0,time);
}

/* НАРАТИВ */
setTimeout(()=>say("ядро пробуджується"),1000);
setTimeout(()=>say("планета більше не мовчить"),4500);
setTimeout(()=>say("утримуй баланс",0),8000);

/* ВЗАЄМОДІЯ */
document.addEventListener("mousedown",()=>hold=true);
document.addEventListener("touchstart",e=>{e.preventDefault();hold=true},{passive:false});
document.addEventListener("mouseup",()=>hold=false);
document.addEventListener("touchend",()=>hold=false);

/* ФІЗИКА */
function loop(){
  if(stabilized) return;
  t+=0.025;

  entropy+=hold?-0.9:0.45;
  entropy=Math.max(0,Math.min(100,entropy));
  const k=entropy/100;

  const sx=Math.sin(t)*50*k;
  const sy=Math.cos(t*1.4)*50*k;
  const r=Math.sin(t*.6)*12*k;

  root.style.setProperty("--entropy",k);
  root.style.setProperty("--shakeX",sx+"px");
  root.style.setProperty("--shakeY",sy+"px");
  root.style.setProperty("--rotate",r+"deg");

  if(hold && entropy<1){
    stabilized=true;
    flash.style.opacity=1;
    setTimeout(()=>flash.style.opacity=0,120);
    say("ядро прийняло тебе",4000);
    setTimeout(()=>say("ти — свідомість планети",0),4500);
  }

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>

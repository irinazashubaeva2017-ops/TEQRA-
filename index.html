<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TEQRA | Zero Point</title>

<style>
:root{
  --instability:0;
  --dx:0px;
  --dy:0px;
  --rot:0deg;
  --ab:0px;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  user-select:none;
  cursor:none;
}

body{
  background:#050505;
  height:100vh;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:monospace;
  color:rgba(255,255,255,.6);
}

#world{
  width:100vw;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  transform:
    translate(var(--dx),var(--dy))
    rotate(var(--rot));
}

.vignette{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,transparent 30%,#000 90%);
  pointer-events:none;
  opacity:calc(.3 + var(--instability));
}

.grain{
  position:fixed;
  inset:0;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.15'/%3E%3C/svg%3E");
  pointer-events:none;
}

.core{
  position:relative;
  width:140px;
  height:140px;
  border-radius:50%;
  background:#000;
  box-shadow:
    0 0 calc(40px + var(--instability)*140px)
    rgba(255,50,50,var(--instability));
}

.core::before{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:50%;
  border:1px solid rgba(255,255,255,.8);
}

.crack{
  position:absolute;
  width:2px;
  height:160px;
  background:linear-gradient(
    transparent,
    rgba(255,80,80,.9),
    transparent
  );
  opacity:var(--instability);
  transform-origin:center;
}

.c1{transform:rotate(15deg);}
.c2{transform:rotate(60deg);}
.c3{transform:rotate(120deg);}
.c4{transform:rotate(170deg);}

.ghost{
  position:absolute;
  width:140px;
  height:140px;
  border-radius:50%;
  border:1px solid cyan;
  opacity:calc(var(--instability)*.7);
  transform:
    translate(calc(var(--ab)*1px),calc(var(--ab)*-1px));
}

.ghost.red{
  border-color:red;
  transform:
    translate(calc(var(--ab)*-1px),calc(var(--ab)*1px));
}

.thought{
  position:fixed;
  bottom:18%;
  width:100%;
  text-align:center;
  letter-spacing:.3em;
  font-size:.8rem;
  opacity:0;
  transition:opacity 1s;
  mix-blend-mode:difference;
}
</style>
</head>

<body>

<div class="vignette"></div>
<div class="grain"></div>

<div id="world">
  <div class="ghost red"></div>
  <div class="ghost"></div>

  <div class="core" id="core">
    <div class="crack c1"></div>
    <div class="crack c2"></div>
    <div class="crack c3"></div>
    <div class="crack c4"></div>
  </div>
</div>

<div class="thought" id="thought"></div>

<script>
const root=document.documentElement;
const thought=document.getElementById("thought");

let entropy=0;
let hold=false;
let t=0;
let stabilized=false;

function say(text,time=3000){
  thought.textContent=text;
  thought.style.opacity=1;
  if(time>0) setTimeout(()=>thought.style.opacity=0,time);
}

setTimeout(()=>say("рівновага зникла"),1000);
setTimeout(()=>say("ядро тріщить"),4000);
setTimeout(()=>say("утримуй",0),7000);

document.addEventListener("mousedown",()=>hold=true);
document.addEventListener("touchstart",()=>hold=true,{passive:false});
document.addEventListener("mouseup",()=>hold=false);
document.addEventListener("touchend",()=>hold=false);

function loop(){
  if(stabilized) return;
  t+=0.03;

  entropy+=hold?-0.8:0.4;
  entropy=Math.max(0,Math.min(100,entropy));

  const k=entropy/100;
  const dx=Math.sin(t)*60*k;
  const dy=Math.cos(t*1.3)*60*k;
  const r=Math.sin(t*.7)*15*k;

  root.style.setProperty("--instability",k);
  root.style.setProperty("--dx",dx+"px");
  root.style.setProperty("--dy",dy+"px");
  root.style.setProperty("--rot",r+"deg");
  root.style.setProperty("--ab",Math.abs(dx)+Math.abs(dy));

  if(hold && entropy<1){
    stabilized=true;
    say("дрифт зупинено",4000);
    setTimeout(()=>say("ти тримаєш світ",0),4500);
  }

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
